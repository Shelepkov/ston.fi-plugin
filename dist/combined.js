(()=>{"use strict";var e={ton:"toncoin"};function t(){if(new RegExp("/pools/[^/]+").test(window.location.pathname)){var t=document.querySelector("main.flex-1");if(t){var n=t.querySelector("header");if(n){var d=n.querySelector("h2.font-bold.typography-h2.truncate");if(d){var r=d.textContent.split("/")[0].trim().toLowerCase();r=e[r]||r;var o=document.createElement("div");o.id="graph",o.style.width="100%",o.style.backgroundColor="transparent";var a=document.createElement("table");a.style.width="100%",a.style.borderCollapse="collapse";var l=document.createElement("thead"),i=document.createElement("tr");["Time","Price (".concat(r.toUpperCase(),"/USD)")].forEach((function(e){var t=document.createElement("th");t.textContent=e,t.style.border="1px solid #dddddd",t.style.textAlign="left",t.style.padding="8px",i.appendChild(t)})),l.appendChild(i),a.appendChild(l);var c=document.createElement("tbody");fetch("https://api.coingecko.com/api/v3/coins/".concat(r,"/market_chart?vs_currency=usd&days=1")).then((function(e){return e.json()})).then((function(e){if(e&&e.prices){var t=null;e.prices.forEach((function(e){var n=new Date(e[0]),d=n.getMinutes();if(0===d||30===d){var r=document.createElement("tr"),o=n.toLocaleTimeString(),a=e[1].toFixed(2),l=document.createElement("td");l.textContent=o,l.style.border="1px solid #dddddd",l.style.padding="8px";var i=document.createElement("td");i.textContent=a,i.style.border="1px solid #dddddd",i.style.padding="8px",null!==t&&(a>t?r.style.backgroundColor="#74D492":a<t&&(r.style.backgroundColor="#FE4747")),r.appendChild(l),r.appendChild(i),c.appendChild(r),t=a}}))}})),a.appendChild(c),o.appendChild(a),n.parentNode.insertBefore(o,n.nextSibling)}}}}}function n(){if(new RegExp("/pools/[^/]+").test(window.location.pathname)){var e=document.querySelector("main.flex-1");if(e){var t=e.querySelector("header");if(t){var n=document.createElement("div");n.id="saveBlock",n.style.width="100%",n.style.backgroundColor="transparent";var o=document.createElement("button");o.id="pool.header.addLiquidity",o.className="animate-ui-element-transition bg-buttonPrimary hover:bg-buttonPrimaryHover active:bg-buttonPrimaryHover text-white px-[20px] rounded-[12px] h-[48px] whitespace-nowrap flex items-center justify-center w-full",o.addEventListener("click",d);var a=document.createElement("p");a.className="font-medium typography-button2 truncate inline-flex items-center justify-center gap-[8px]",a.textContent="Сохранить результат",o.appendChild(a);var l=document.createElement("table");l.id="resultTable",l.style.width="100%",l.style.borderCollapse="collapse",l.style.marginTop="10px";var i=document.createElement("thead"),c=document.createElement("tr");["Date","Pair","Actions"].forEach((function(e){var t=document.createElement("th");t.textContent=e,t.style.border="1px solid #dddddd",t.style.textAlign="left",t.style.padding="8px",c.appendChild(t)})),i.appendChild(c),l.appendChild(i);var s=document.createElement("tbody");l.appendChild(s),n.appendChild(o),n.appendChild(l),t.parentNode.insertBefore(n,t.nextSibling),chrome.storage.local.get({results:[]},(function(e){e.results.forEach((function(e){r(e)}))}))}}}}function d(){var e=document.querySelector("h2.font-bold.typography-h2.truncate");if(e){var t=e.textContent,n={date:(new Date).toLocaleString(),pair:t};chrome.storage.local.get({results:[]},(function(e){e.results.push(n),chrome.storage.local.set({results:e.results},(function(){r(n)}))}))}}function r(e){var t=document.getElementById("resultTable").querySelector("tbody"),n=document.createElement("tr"),d=document.createElement("td");d.textContent=e.date,d.style.border="1px solid #dddddd",d.style.padding="8px";var r=document.createElement("td");r.textContent=e.pair,r.style.border="1px solid #dddddd",r.style.padding="8px";var o=document.createElement("td");o.style.border="1px solid #dddddd",o.style.padding="8px";var a=document.createElement("button");a.textContent="Удалить",a.addEventListener("click",(function(){var t;t=e,chrome.storage.local.get({results:[]},(function(e){var n=e.results.filter((function(e){return e.date!==t.date&&e.pair!==t.pair}));chrome.storage.local.set({results:n})})),n.remove()})),o.appendChild(a),n.appendChild(d),n.appendChild(r),n.appendChild(o),t.appendChild(n)}window.addEventListener("load",(function(){setTimeout((function(){var e;t(),n(),e=location.href,new MutationObserver((function(){var d=location.href;d!==e&&(e=d,setTimeout((function(){t(),n()}),200))})).observe(document,{subtree:!0,childList:!0})}),200)}))})();